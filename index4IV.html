<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Website</title>
    <link rel="stylesheet" href="./style.css">
    <script
		src="https://code.jquery.com/jquery-3.4.1.js"
		integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
		crossorigin="anonymous"></script>
  </head>
  <body>
    <main class="condition">
      <div class="progress">
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="vaadin:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
      </div>
      <div class="centermiddle">
          <div class="decision-making">
            <h3>Here is the new set of playlists, <br>select the playlist that you would be most interested in to listen to</h3>
          </div>
            <div class="grid-choice">
              <div class="playlist-choice item1 secondChoice" onclick="PreSubForm(this)">
                <img src="assets/visualII.jpg" alt="">
                <input type="hidden" name="choiceIII_IV" value="I-NP1"><h2 class="nonPersonalizedTitle title selectedTitlesIV" id="title1"></h2>
              </div>
              <div class="playlist-choice item2 secondChoice" onclick="PreSubForm(this)">
                <img src="assets/visualII.jpg" alt="">
                <input type="hidden" name="choiceIII_IV" value="I-P2"><h2  class="personalizedTitle title selectedTitlesIV"  id="title2"></h2>
              </div>
              <div class="playlist-choice item3 secondChoice" onclick="PreSubForm(this)">
                <img src="assets/visualII.jpg" alt="">
                <input type="hidden" name="choiceIII_IV" value="I-NP3"><h2 class="nonPersonalizedTitle title selectedTitlesIV" id="title3"></h2>
              </div>
              <div class="playlist-choice item4 secondChoice" onclick="PreSubForm(this)">
                <img src="assets/visualII.jpg" alt="">
                <input type="hidden" name="choiceIII_IV" value="I-P4"><h2  class="personalizedTitle title selectedTitlesIV"  id="title4"></h2>
              </div>
            <div>
      </div>
    </main>
    <script>
      const playlistChoicesII = document.querySelectorAll(".secondChoice");

      playlistChoicesII.forEach((choice) => {
        choice.addEventListener("click", () => {
          console.log("hello")
          const clickedTitleII = choice.querySelector('.title').innerHTML; 

          //save titles of this page
          const h2Elements = document.querySelectorAll('.selectedTitlesIV');
          const selectedTitlesIV = [];

          h2Elements.forEach((h2) => {
            selectedTitlesIV.push(h2.innerText);
            console.log("fd",selectedTitlesIV)
          });

          localStorage.setItem('selectedTitlesIV', JSON.stringify(selectedTitlesIV));


          localStorage.setItem('clickedTitleII', clickedTitleII); 
          window.location.href = "index5BI-4IV.html";
        });
      });

      function PreSubForm(clickedElem) {
      const input = clickedElem.querySelector('input');
      const name = encodeURIComponent(input.name);
      const value = encodeURIComponent(input.value);
      const formData = `${name}=${value}`;
      sessionStorage.setItem('page4III_IVFormData', formData);
    }

    
  </script>
    <script src="index.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>
  </body>
</html>