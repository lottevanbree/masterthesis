<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Website</title>
    <link rel="stylesheet" href="./style.css">
    <script
		src="https://code.jquery.com/jquery-3.4.1.js"
		integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
		crossorigin="anonymous"></script>
  </head>
  <body>
    <main class="condition">
      <div class="progress">
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="vaadin:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
      </div>
      <div class="centermiddle">
          <div class="decision-making">
            <h3>Select the playlist that you would be most interested in to listen to <!--clear enough that you cant see the content before choosing?--></h3>
          </div>
            <div class="grid-choice">
              <div class="playlist-choice item1 firstChoice" onclick="PreSubForm(this)">
                <img src="assets/visual.jpg" alt="">
                <input type="hidden" name="choiceI/II" value="I-NP1"><h2 class="randomTitle nonPersonalizedTitle title selectedTitlesII" id="title1"></h2>
              </div>
              <div class="playlist-choice item2 firstChoice" onclick="PreSubForm(this)">
                <img src="assets/visual.jpg" alt="">
                <input type="hidden" name="choiceI/II" value="I-NP2"><h2 class="randomTitle nonPersonalizedTitle title selectedTitlesII" id="title2"></h2>
              </div>
              <div class="playlist-choice item3 firstChoice" onclick="PreSubForm(this)">
                <img src="assets/visual.jpg" alt="">
                <input type="hidden" name="choiceI/II" value="I-NP3"><h2 class="randomTitle nonPersonalizedTitle title selectedTitlesII" id="title3"></h2>
              </div>
              <div class="playlist-choice item4 firstChoice" onclick="PreSubForm(this)">
                <img src="assets/visual.jpg" alt="">
                <input type="hidden" name="choiceI/II" value="I-NP4"><h2 class="randomTitle nonPersonalizedTitle title selectedTitlesII" id="title4"></h2>
              </div>
            <div>
      </div>
    </main>
    <script>

    const playlistChoicesI = document.querySelectorAll(".firstChoice");

    playlistChoicesI.forEach((choice) => {
      choice.addEventListener("click", () => {
        console.log("hello");
        const clickedTitleI = choice.querySelector('.title').innerHTML; 

           //save titles of this page
          const h2Elements = document.querySelectorAll('.selectedTitlesII');
          const selectedTitlesII = [];

          h2Elements.forEach((h2) => {
            selectedTitlesII.push(h2.innerText);
            console.log("fd",selectedTitlesII)
          });

          localStorage.setItem('selectedTitlesII', JSON.stringify(selectedTitlesII));

        localStorage.setItem('clickedTitleI', clickedTitleI); 
        window.location.href = "index5AI-4II.html";
      });
    });
/*
const npPlaylistTitles = [ //non personalized titles
    "Top Pop Hits of All Time", "The Ultimate Pop Playlist",  "Best Pop Songs of the Decade", "Classic Pop Anthems", "Pop Party Mix", "Greatest Rock Hits of All Time", "The Ultimate Rock Playlist", "Best Classic Rock Songs", "Hard Rock Anthems", "Rock Road Trip Mix", "Top Hip Hop Hits of All Time", "The Ultimate Hip Hop Playlist",  "Best Hip Hop Songs of the Decade",  "Classic Hip Hop Anthems", "Hip Hop Party Mix", "Top Electronic Hits of All Time", "The Ultimate Electronic Playlist",  "Best Electronic Songs of the Decade", "Classic Electronic"
  ];

      function PreSubForm(clickedElem) {
      const input = clickedElem.querySelector('input');
      const name = encodeURIComponent(input.name);
      const value = encodeURIComponent(input.value);
      const formData = `${name}=${value}`;
      sessionStorage.setItem('page4I_IIFormData', formData);
    }

    const storedNonPersonalizedTitles = JSON.parse(sessionStorage.getItem('selectedNpPlaylist'));
let selectedItemsNp = [];

if (storedNonPersonalizedTitles) {
  // display the selected titles from session storage
  document.querySelectorAll(".nonPersonalizedTitle").forEach(function(title, index) {
    title.innerHTML = storedNonPersonalizedTitles[index];
  });

  selectedItemsNp = selectedItemsNp.concat(storedNonPersonalizedTitles);
  console.log(storedNonPersonalizedTitles);
} else {
  // if titles are not stored in session storage, pick new ones
  const nonpersonalizedPlaylist = npPlaylistTitles;
  const selectedTitlesNP = [];

  while (selectedTitlesNP.length < 4) {
    const randomIndex = Math.floor(Math.random() * nonpersonalizedPlaylist.length);
    const title = nonpersonalizedPlaylist[randomIndex];
    if (!selectedTitlesNP.includes(title)) {
      selectedTitlesNP.push(title);
    }
  }
  
  // assign each title element to a different title from the selectedTitles array
  document.querySelectorAll(".nonPersonalizedTitle").forEach(function(title, index) {
    title.innerHTML = selectedTitlesNP[index];
    
  });
  
  // save the selected titles array to session storage
  sessionStorage.setItem('selectedNpPlaylist', JSON.stringify(selectedTitlesNP));
  
  // save the selected items array to session storage
  selectedItemsNp = selectedItemsNp.concat(selectedTitlesNP);
}

sessionStorage.setItem('selectedItemsNp', JSON.stringify(selectedItemsNP));
console.log(storedNonPersonalizedTitles);

// Store selected genre and personalized playlist title in local storage page 4
localStorage.setItem('selectedGenre', allSelectedGenres);
localStorage.setItem('personalizedTitle', JSON.stringify(personalizedPlaylists));*/
  </script>
 <script src="index.js">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>
  </body>
</html>