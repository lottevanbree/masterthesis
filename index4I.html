<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Website</title>
    <link rel="stylesheet" href="./style.css">
    <script
		src="https://code.jquery.com/jquery-3.4.1.js"
		integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
		crossorigin="anonymous"></script>
  </head>
  <body>
    <main class="condition">
      <div class="progress">
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="vaadin:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
      </div>
      <div class="centermiddle">
          <div class="decision-making">
            <h3>Select the playlist that you would be most interested in to listen to</h3>
          </div>
            <div class="grid-choice">
              <div class="playlist-choice item1 firstChoice" onclick="PreSubForm(this)">
                <img src="assets/visual.jpg" alt="">
                <input type="hidden" name="choiceI_II" value="I-P1" > <h2 class="personalizedTitle title" style="font-size: 0.8rem;" id="title1"></h2>
              </div>
              <div class="playlist-choice item2 firstChoice" onclick="PreSubForm(this)">
                <img src="assets/visual.jpg" alt="">
                <input type="hidden" name="choiceI_II" value="I-P2" > <h2 class="personalizedTitle title" style="font-size: 0.8rem;" id="title2"></h2>
              </div>
              <div class="playlist-choice item3 firstChoice" onclick="PreSubForm(this)">
                <img src="assets/visual.jpg" alt="">
                <input type="hidden" name="choiceI_II" value="I-P3" > <h2 class="personalizedTitle title" style="font-size: 0.8rem;"  id="title3"></h2>
              </div>
              <div class="playlist-choice item4 firstChoice" onclick="PreSubForm(this)">
                <img src="assets/visual.jpg" alt="">
                <input type="hidden" name="choiceI_II" value="I-P4" > <h2 class="personalizedTitle title" style="font-size: 0.8rem;" id="title4" ></h2>
              </div>
      </div>
             
    </main>
    <script>
      const playlistChoicesI = document.querySelectorAll(".firstChoice");

      playlistChoicesI.forEach((choice) => {
        choice.addEventListener("click", () => {
          console.log("hello");
          const clickedTitleI = choice.querySelector('.title').innerHTML; 
          localStorage.setItem('clickedTitleI', clickedTitleI); 
          window.location.href = "index5AI-4I.html";
        });
      });

        function PreSubForm(clickedElem) {
        const input = clickedElem.querySelector('input');
        const name = encodeURIComponent(input.name);
        const value = encodeURIComponent(input.value);
        const formData = `${name}=${value}`;
        sessionStorage.setItem('page4I_IIFormData', formData);
      }

/*
const pPlaylistTitles = {  // Personalized playlists  
  "pop":            [    "Pop Picks Just for You",    "Your Daily Pop Mix",    "Pop Jams Tailored to You",    "Pop Discoveries for You",   "Pop Bangers Handpicked for You"  ],
  "rock":           [    "Your Personal Rock Journey",    "Rock Essentials for You",    "Rock Classics Curated for You",    "Your Rock Favorites",    "Rock Hits Tailored to You"  ],
  "R&B":            [    "Your Daily R&B Mix",    "R&B Discoveries for You",    "R&B Essentials Tailored to You",    "R&B Gems Handpicked for You",    "Your Personal R&B Collection"  ],
  "electronic":     [    "Your Electronic Essentials",    "Electronic Discoveries for You",    "Personalized Electronic Mix",    "Electronic Gems Tailored to You",    "Electronic Beats Just for You"  ] ,
  "classical":      [    "Classical Just for You",    "Your Classical Mix",    "Classical Jams Tailored to You",    "Classical Discoveries for You",    "Classical Bangers Handpicked for You"  ],
  "dance":          [    "Your Personal Dance Journey",    "Dance Essentials for You",    "Dance Classics Curated for You",    "Your Dance Favorites",    "Dance Hits Tailored to You"  ],
  "jazz":          [    "Your Daily Jazz Mix",    "Jazz Discoveries for You",    "Jazz Essentials Tailored to You",    "Jazz Gems Handpicked for You",    "Your Personal Jazz Collection"  ],
  "country":       [    "Your Country Essentials",    "Country Discoveries for You",    "Personalized Country Mix",    "Country Gems Tailored to You",    "Country Beats Just for You"  ] ,
  "indie":         [    "Your Daily Indie Mix",    "Indie Discoveries for You",    "Indie Essentials Tailored to You",    "Indie Gems Handpicked for You",   "Your Personal Indie Collection"  ],
  "metal":         [    "Your Metal Essentials",    "Metal Discoveries for You",    "Personalized Metal Mix",    "Metal Gems Tailored to You",    "Metal Beats Just for You"  ] 
  };


const storedGenres = localStorage.getItem('selectedGenres');
const useSelectedGenres = storedGenres ? JSON.parse(storedGenres) : null;
console.log("selected:", useSelectedGenres);
console.log('hi');

const allSelectedGenres = useSelectedGenres.flatMap((x) => pPlaylistTitles[x]);
const personalizedPlaylists = allSelectedGenres;

let selectedItems = [];

const storedSelectedTitles = JSON.parse(sessionStorage.getItem('selectedTitles'));
if (storedSelectedTitles && storedSelectedTitles.length === 4) {
  // retrieve the selected titles from session storage
  selectedItems = storedSelectedTitles;

  // display the selected playlist titles
  document.querySelectorAll(".personalizedTitle").forEach(function(title, index) {
    title.innerHTML = storedSelectedTitles[index];
    console.log('1');
  });
} else {
  console.log("selected:", useSelectedGenres);

  // generate a new set of selected titles
  const selectedTitles = [];
  while (selectedTitles.length < 4 && personalizedPlaylists.length > 0) {
    const randomIndex = Math.floor(Math.random() * personalizedPlaylists.length);
    const title = personalizedPlaylists.splice(randomIndex, 1)[0];
    selectedTitles.push(title);
  }
  console.log(selectedTitles);

  // assign each title element to a different title from the selectedTitles array
  document.querySelectorAll(".personalizedTitle").forEach(function(title, index) {
    title.innerHTML = selectedTitles[index];
    console.log('2');
  });

  // save the selected titles array to session storage
  sessionStorage.setItem('selectedTitles', JSON.stringify(selectedTitles));
  console.log(selectedTitles);

  // save the selected items array
  selectedItems = selectedTitles;
}
console.log(selectedItems)
console.log(selectedTitles)
console.log(storedSelectedTitles)*/
    </script>
<script src="index.js">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>
  </body>
</html>