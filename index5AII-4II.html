<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>My Website</title>
    <link rel="stylesheet" href="./style.css">
    <script
		src="https://code.jquery.com/jquery-3.4.1.js"
		integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
		crossorigin="anonymous"></script>
  </head>
  <body>
    <main>
      <div class="progress">
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="fa-solid:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="vaadin:dot-circle" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
        <hr>
        <iconify-icon icon="lucide:circle-dot" style="color: #1ad760;vertical-align: middle;" width="10"></iconify-icon>
      </div>
         
      <div id="intro5" class="intro5II">
        <h1>Survey - part II</h1>  
        <h3>Questions regarding the system</h3>
        <p class="index2">The playlists you were presented have been carefully put together by a system we developed, with this system and the playlists it presented to you (shown below). We are interested in your experience with this system and the playlists it presented to you. Please look carefully at the playlist selection and indicate to what extent you agree with the statements below.</p>

 <div class="centermiddleChoice5II">
            <div class="grid-choiceII gridMobile">
              <div class="playlist-choice item1">
                <img src="assets/visual.jpg" alt="">
                <h2 style="font-size: 0.8rem;" id="title1" class="title systemReuse" ></h2>
              </div>
              <div class="playlist-choice item2">
                <img src="assets/visual.jpg" alt="">
                <h2 style="font-size: 0.8rem;" id="title2" class="title systemReuse"></h2>
              </div>
              <div class="playlist-choice item3">
                <img src="assets/visual.jpg" alt="">
                <h2 style="font-size: 0.8rem;"  id="title3" class="title systemReuse"></h2>
              </div>
              <div class="playlist-choice item4">
                <img src="assets/visual.jpg" alt="">
                <h2 style="font-size: 0.8rem;" id="title4" class="title systemReuse"></h2>
              </div>
          </div>

        <div class="questions questionsII">
          <table>
            <tr class="backtable">
              <th id="likert">Questions</th>
              <th>Strongly Disagree</th>
              <th>Disagree</th>
              <th>Neutral</th>
              <th>Agree</th>
              <th>Strongly Agree</th>
            </tr>
            <tr class="backtable-soft question">
              <td class="question-text ">The system recommended playlists that I expect to be in line with my personal preferences.</td>
              <td><input type="radio" name="satisfactionI1" value="1"></td>
              <td><input type="radio" name="satisfactionI1" value="2"></td>
              <td><input type="radio" name="satisfactionI1" value="3"></td>
              <td><input type="radio" name="satisfactionI1" value="4"></td>
              <td><input type="radio" name="satisfactionI1" value="5"></td>
            </tr>
            <tr class="backtable question">
              <td class="question-text">I do not expect that any of the playlists presented to me contain songs based on my personal taste.</td>
              <td><input type="radio" name="satisfactionI2" value="1"></td>
              <td><input type="radio" name="satisfactionI2" value="2"></td>
              <td><input type="radio" name="satisfactionI2" value="3"></td>
              <td><input type="radio" name="satisfactionI2" value="4"></td>
              <td><input type="radio" name="satisfactionI2" value="5"></td>
            </tr>
            <tr class="backtable-soft question">
              <td class="question-text">The playlists that were provided to me appeared to be unrelated to my musical preferences.</td>
              <td><input type="radio" name="satisfactionI3" value="1"></td>
              <td><input type="radio" name="satisfactionI3" value="2"></td>
              <td><input type="radio" name="satisfactionI3" value="3"></td>
              <td><input type="radio" name="satisfactionI3" value="4"></td>
              <td><input type="radio" name="satisfactionI3" value="5"></td>
            </tr>
            <tr class="backtable question">
              <td class="question-text">I expect each song in the playlists offered to me to be generated based on my own preferences.</td>
              <td><input type="radio" name="satisfactionI4" value="1"></td>
              <td><input type="radio" name="satisfactionI4" value="2"></td>
              <td><input type="radio" name="satisfactionI4" value="3"></td>
              <td><input type="radio" name="satisfactionI4" value="4"></td>
              <td><input type="radio" name="satisfactionI4" value="5"></td>
            </tr>
            <tr class="backtable-soft question">
              <td class="question-text">I like systems to provide me with playlists that match my preferences.</td>
              <td><input type="radio" name="satisfactionI5" value="1"></td>
              <td><input type="radio" name="satisfactionI5" value="2"></td>
              <td><input type="radio" name="satisfactionI5" value="3"></td>
              <td><input type="radio" name="satisfactionI5" value="4"></td>
              <td><input type="radio" name="satisfactionI5" value="5"></td>
            </tr>  
          </table>
        </div>
        <button class="buttonII" onclick="PreSubForm(); fn2();">Continue</button>
    </div>
    </main>
        <script src="index.js"></script>
        <script >
        const selectedTitlesII = JSON.parse(localStorage.getItem('selectedTitlesII'));
        const h2Elements = document.querySelectorAll('.systemReuse');
         console.log(selectedTitlesII)
        h2Elements.forEach((h2, index) => {
        h2.innerText = selectedTitlesII[index];
            });


function PreSubForm() {
          const inputChoiceI = document.querySelectorAll('input:checked');
          const values = [];

          inputChoiceI.forEach(input => {
            values.push(`${encodeURIComponent(input.name)}=${encodeURIComponent(input.value)}`);
          });

          const formData = values.join('&');

          sessionStorage.setItem('page5iFormData', formData);
        }

        function fn2() {
        let selectedNumber = 0;
        const table = document.querySelector('table');
        const rows = document.querySelectorAll('.question');

        for (let i = 0; i < rows.length; i++) {
          const inputs = rows[i].querySelectorAll('input[type="radio"]');
          
          for (let j = 0; j < inputs.length; j++) {
            if (inputs[j].checked) {
              selectedNumber++;
              console.log(selectedNumber);
            }
          }
        }

        if (selectedNumber < (rows.length-1)) {
              alert("Please make sure all sections are filled in.");
              console.log(selectedNumber);
            } 

            if (selectedNumber === (rows.length)) {
              window.location.href = "index-break.html";
            } else {
              console.log("fail")
            }
      }
      

      //ERROR -- present in H2 elements the titles
      const selectedItemsPage4 = JSON.parse(localStorage.getItem('selectedItems'));


      if (localStorage.getItem('selectedItems') !== null) {
       const selectedItemsPage4 = JSON.parse(localStorage.getItem('selectedItems'));
}

      console.log(selectedItemsPage4);





      //try out
      
        </script>
        <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>
  </body>
</html>